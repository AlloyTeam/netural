<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <div id="aa"></div>
<script>

    var data= {"sx":24,"sy":24,"depth":1,"w":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0.043137254901960784,"9":0.6862745098039216,"10":0.996078431372549,"11":0.8549019607843137,"12":0.5450980392156862,"13":0.12549019607843137,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0.4235294117647059,"33":0.9882352941176471,"34":0.9921568627450981,"35":0.9882352941176471,"36":0.9882352941176471,"37":0.9294117647058824,"38":0.12549019607843137,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0.023529411764705882,"57":0.42745098039215684,"58":0.08235294117647059,"59":0.2196078431372549,"60":0.7058823529411765,"61":0.9882352941176471,"62":0.5764705882352941,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0.06274509803921569,"85":0.9058823529411765,"86":0.9882352941176471,"87":0.10588235294117647,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0.3176470588235294,"110":0.9882352941176471,"111":0.41568627450980394,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0.21176470588235294,"134":0.9686274509803922,"135":0.48627450980392156,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0.8274509803921568,"159":0.8274509803921568,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0.8274509803921568,"183":0.8274509803921568,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0.14901960784313725,"203":0.25098039215686274,"204":0.23137254901960785,"205":0.06274509803921569,"206":0.8666666666666667,"207":0.8274509803921568,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0.17647058823529413,"226":0.7529411764705882,"227":0.9882352941176471,"228":0.9764705882352941,"229":0.8666666666666667,"230":0.9882352941176471,"231":0.8274509803921568,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0.043137254901960784,"249":0.8588235294117647,"250":0.996078431372549,"251":0.9921568627450981,"252":0.8549019607843137,"253":0.9921568627450981,"254":0.9921568627450981,"255":0.8588235294117647,"256":0.11372549019607843,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0.03137254901960784,"272":0.6705882352941176,"273":0.9882352941176471,"274":0.7294117647058823,"275":0.24705882352941178,"276":0.043137254901960784,"277":0.7411764705882353,"278":0.9882352941176471,"279":0.9921568627450981,"280":0.7686274509803922,"281":0.027450980392156862,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0.08627450980392157,"296":0.9882352941176471,"297":0.7450980392156863,"298":0.20784313725490197,"299":0,"300":0.043137254901960784,"301":0.8274509803921568,"302":0.9882352941176471,"303":0.9921568627450981,"304":0.9882352941176471,"305":0.8470588235294118,"306":0.027450980392156862,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0.25882352941176473,"320":0.9882352941176471,"321":0.26666666666666666,"322":0,"323":0,"324":0.06274509803921569,"325":0.9058823529411765,"326":0.9882352941176471,"327":0.6745098039215687,"328":0.8235294117647058,"329":0.9882352941176471,"330":0.6666666666666666,"331":0.1450980392156863,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0.43137254901960786,"344":0.9882352941176471,"345":0.5764705882352941,"346":0,"347":0,"348":0,"349":0.6627450980392157,"350":0.9882352941176471,"351":0.41568627450980394,"352":0.054901960784313725,"353":0.7490196078431373,"354":0.9882352941176471,"355":0.9215686274509803,"356":0.5176470588235295,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0.25882352941176473,"368":0.9921568627450981,"369":0.5764705882352941,"370":0,"371":0,"372":0.32941176470588235,"373":0.9921568627450981,"374":0.9254901960784314,"375":0.17647058823529413,"376":0,"377":0.03529411764705882,"378":0.6901960784313725,"379":0.9686274509803922,"380":1,"381":0.9921568627450981,"382":0.3254901960784314,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0.08627450980392157,"392":0.9882352941176471,"393":0.7137254901960784,"394":0,"395":0,"396":0.807843137254902,"397":0.9882352941176471,"398":0.5764705882352941,"399":0,"400":0,"401":0,"402":0,"403":0.3803921568627451,"404":0.6588235294117647,"405":0.6588235294117647,"406":0.1568627450980392,"407":0,"408":0,"409":0,"410":0,"411":0,"412":0,"413":0,"414":0,"415":0.043137254901960784,"416":0.8235294117647058,"417":0.9882352941176471,"418":0.6705882352941176,"419":0.4980392156862745,"420":0.9490196078431372,"421":0.8313725490196079,"422":0.11372549019607843,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":0,"430":0,"431":0,"432":0,"433":0,"434":0,"435":0,"436":0,"437":0,"438":0,"439":0,"440":0.5568627450980392,"441":0.9882352941176471,"442":0.9921568627450981,"443":0.9882352941176471,"444":0.9686274509803922,"445":0.24705882352941178,"446":0,"447":0,"448":0,"449":0,"450":0,"451":0,"452":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":0,"460":0,"461":0,"462":0,"463":0,"464":0.043137254901960784,"465":0.33725490196078434,"466":0.6470588235294118,"467":0.8509803921568627,"468":0.1843137254901961,"469":0,"470":0,"471":0,"472":0,"473":0,"474":0,"475":0,"476":0,"477":0,"478":0,"479":0,"480":0,"481":0,"482":0,"483":0,"484":0,"485":0,"486":0,"487":0,"488":0,"489":0,"490":0,"491":0,"492":0,"493":0,"494":0,"495":0,"496":0,"497":0,"498":0,"499":0,"500":0,"501":0,"502":0,"503":0,"504":0,"505":0,"506":0,"507":0,"508":0,"509":0,"510":0,"511":0,"512":0,"513":0,"514":0,"515":0,"516":0,"517":0,"518":0,"519":0,"520":0,"521":0,"522":0,"523":0,"524":0,"525":0,"526":0,"527":0,"528":0,"529":0,"530":0,"531":0,"532":0,"533":0,"534":0,"535":0,"536":0,"537":0,"538":0,"539":0,"540":0,"541":0,"542":0,"543":0,"544":0,"545":0,"546":0,"547":0,"548":0,"549":0,"550":0,"551":0,"552":0,"553":0,"554":0,"555":0,"556":0,"557":0,"558":0,"559":0,"560":0,"561":0,"562":0,"563":0,"564":0,"565":0,"566":0,"567":0,"568":0,"569":0,"570":0,"571":0,"572":0,"573":0,"574":0,"575":0}};



    // returns min, max and indeces of an array
    var maxmin = function(w) {
        if(w.length === 0) { return {}; } // ... ;s

        var maxv = w[0];
        var minv = w[0];
        var maxi = 0;
        var mini = 0;
        for(var i=1;i<w.length;i++) {
            if(w[i] > maxv) { maxv = w[i]; maxi = i; }
            if(w[i] < minv) { minv = w[i]; mini = i; }
        }
        return {maxi: maxi, maxv: maxv, mini: mini, minv: minv, dv:maxv-minv};
    }
    function getA(x, y, d,sx,w,depth) {
        var ix=((sx * y)+x)*depth+d;
        console.log(x+"__"+y)
        console.log(ix)
        return w[ix];
    }
    var draw_activations = function(elt, A, grads) {

        var draw_grads = false;
        if (typeof(grads) !== 'undefined') draw_grads = grads;

        // get max and min activation to scale the maps automatically
        var w = draw_grads ? A.dw : A.w;
        var mm = maxmin(w);
console.log(mm)
        console.log(A)
        // create the canvas elements, draw and add to DOM
        for (var d = 0; d < A.depth; d++) {

            var canv = document.createElement('canvas');
            canv.className = 'actmap';
            var W = A.sx
            var H = A.sy
            canv.width = W;
            canv.height = H;
            var ctx = canv.getContext('2d');
            var g = ctx.createImageData(W, H);

            for (var x = 0; x < A.sx; x++) {
                for (var y = 0; y < A.sy; y++) {
                    var dval = Math.floor(getA(x, y, d, A.sx, A.w, A.depth) * 255);

                    var pp = ((W * (y)) + ( x)) * 4;
                    for (var i = 0; i < 3; i++) {
                        g.data[pp + i] = dval;
                    } // rgb
                    g.data[pp + 3] = 255; // alpha channel

                }
            }
            ctx.putImageData(g, 0, 0);
            elt.appendChild(canv);
        }
    }

    draw_activations(document.querySelector('#aa'),data)

</script>
</body>
</html>

